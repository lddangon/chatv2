<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.chatv2.server.gui.controller.DashboardController"
            styleClass="dashboard-pane">

    <!-- Top: Server Info Bar -->
    <top>
        <HBox styleClass="server-info-bar" spacing="20" alignment="CENTER_LEFT">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>

            <VBox spacing="5">
                <Label text="Server:" styleClass="info-label"/>
                <Label fx:id="serverNameLabel" styleClass="info-value">
                    <font>
                        <Font name="System Bold" size="14"/>
                    </font>
                </Label>
            </VBox>

            <Region HBox.hgrow="ALWAYS"/>

            <VBox spacing="5">
                <Label text="Status:" styleClass="info-label"/>
                <Label fx:id="serverStatusLabel" styleClass="info-value"/>
            </VBox>

            <VBox spacing="5">
                <Label text="Uptime:" styleClass="info-label"/>
                <Label fx:id="uptimeLabel" styleClass="info-value"/>
            </VBox>
        </HBox>
    </top>

    <!-- Center: Statistics and Charts -->
    <center>
        <VBox spacing="20" styleClass="content-area">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>

            <!-- Statistics Grid -->
            <GridPane hgap="20" vgap="20" styleClass="statistics-grid">

                <!-- Connected Clients -->
                <VBox GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="stat-card"
                      alignment="CENTER" spacing="5">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    <Label text="Connected Clients" styleClass="stat-label"/>
                    <Label fx:id="connectedClientsLabel" styleClass="stat-value" text="0">
                        <font>
                            <Font name="System Bold" size="36"/>
                        </font>
                    </Label>
                </VBox>

                <!-- Total Users -->
                <VBox GridPane.columnIndex="1" GridPane.rowIndex="0" styleClass="stat-card"
                      alignment="CENTER" spacing="5">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    <Label text="Total Users" styleClass="stat-label"/>
                    <Label fx:id="totalUsersLabel" styleClass="stat-value" text="0">
                        <font>
                            <Font name="System Bold" size="36"/>
                        </font>
                    </Label>
                </VBox>

                <!-- Total Chats -->
                <VBox GridPane.columnIndex="2" GridPane.rowIndex="0" styleClass="stat-card"
                      alignment="CENTER" spacing="5">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    <Label text="Total Chats" styleClass="stat-label"/>
                    <Label fx:id="totalChatsLabel" styleClass="stat-value" text="0">
                        <font>
                            <Font name="System Bold" size="36"/>
                        </font>
                    </Label>
                </VBox>

                <!-- Total Messages -->
                <VBox GridPane.columnIndex="3" GridPane.rowIndex="0" styleClass="stat-card"
                      alignment="CENTER" spacing="5">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    <Label text="Total Messages" styleClass="stat-label"/>
                    <Label fx:id="totalMessagesLabel" styleClass="stat-value" text="0">
                        <font>
                            <Font name="System Bold" size="36"/>
                        </font>
                    </Label>
                </VBox>

                <!-- Messages Today -->
                <VBox GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="stat-card"
                      alignment="CENTER" spacing="5">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    <Label text="Messages Today" styleClass="stat-label"/>
                    <Label fx:id="messagesTodayLabel" styleClass="stat-value" text="0">
                        <font>
                            <Font name="System Bold" size="36"/>
                        </font>
                    </Label>
                </VBox>
            </GridPane>

            <!-- Activity Chart -->
            <VBox VBox.vgrow="ALWAYS" spacing="10">
                <Label text="Server Activity" styleClass="section-title"/>
                <LineChart fx:id="activityChart" VBox.vgrow="ALWAYS" styleClass="activity-chart">
                    <xAxis>
                        <CategoryAxis label="Time"/>
                    </xAxis>
                    <yAxis>
                        <NumberAxis label="Count" side="LEFT"/>
                    </yAxis>
                </LineChart>
            </VBox>
        </VBox>
    </center>

    <!-- Bottom: Control Buttons -->
    <bottom>
        <HBox styleClass="control-bar" spacing="10" alignment="CENTER_RIGHT">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>

            <Button fx:id="startButton" text="Start Server" onAction="#handleStartServer"
                    styleClass="control-button, start-button"/>

            <Button fx:id="stopButton" text="Stop Server" onAction="#handleStopServer"
                    styleClass="control-button, stop-button"/>

            <Button fx:id="restartButton" text="Restart Server" onAction="#handleRestartServer"
                    styleClass="control-button, restart-button"/>
        </HBox>
    </bottom>

</BorderPane>
