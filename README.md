# ChatV2 - ะัะพัะตััะธะพะฝะฐะปัะฝะพะต ะปะพะบะฐะปัะฝะพะต ัะฐั-ะฟัะธะปะพะถะตะฝะธะต

[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://openjdk.org/projects/jdk/21/)
[![Maven](https://img.shields.io/badge/Maven-3.9+-red.svg)](https://maven.apache.org/)
[![Netty](https://img.shields.io/badge/Netty-4.1.109-blue.svg)](https://netty.io/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Tests](https://img.shields.io/badge/Tests-344%20PASSING-brightgreen.svg)](#ัะตััะธัะพะฒะฐะฝะธะต)

ะัะพัะตััะธะพะฝะฐะปัะฝะพะต ะปะพะบะฐะปัะฝะพะต ัะฐั-ะฟัะธะปะพะถะตะฝะธะต ั ะบะปะธะตะฝั-ัะตัะฒะตัะฝะพะน ะฐััะธัะตะบัััะพะน, ะฟะพัััะพะตะฝะฝะพะต ะฝะฐ Java 21 ั ัะพะฒัะตะผะตะฝะฝัะผะธ ะฒะพะทะผะพะถะฝะพัััะผะธ, ะฒะบะปััะฐั ะฒะธัััะฐะปัะฝัะต ะฟะพัะพะบะธ, ัะธััะพะฒะฐะฝะธะต AES-256 ะธ ะณัะฐัะธัะตัะบะธะน ะธะฝัะตััะตะนั JavaFX.

## ๐ ะกะพะดะตัะถะฐะฝะธะต

 - [ะงัะพ ะฝะพะฒะพะณะพ](#ััะพ-ะฝะพะฒะพะณะพ)
 - [ะัะพะฑะตะฝะฝะพััะธ](#ะพัะพะฑะตะฝะฝะพััะธ)
 - [ะััะธัะตะบัััะฐ](#ะฐััะธัะตะบัััะฐ)
 - [ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ](#ัะตัะฝะพะปะพะณะธัะตัะบะธะน-ััะตะบ)
 - [ะขัะตะฑะพะฒะฐะฝะธั](#ััะตะฑะพะฒะฐะฝะธั)
 - [ะัััััะน ััะฐัั](#ะฑัััััะน-ััะฐัั)
 - [ะะพะฝัะธะณััะฐัะธั](#ะบะพะฝัะธะณััะฐัะธั)
 - [ะะพะณะธัะพะฒะฐะฝะธะต](#ะปะพะณะธัะพะฒะฐะฝะธะต)
 - [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](#ััััะบัััะฐ-ะฟัะพะตะบัะฐ)
 - [ะััะธัะตะบัััะฐ ะฟัะพัะพะบะพะปะฐ](#ะฐััะธัะตะบัััะฐ-ะฟัะพัะพะบะพะปะฐ)
 - [ะจะธััะพะฒะฐะฝะธะต](#ัะธััะพะฒะฐะฝะธะต)
 - [ะะฐะทัะฐะฑะพัะบะฐ](#ัะฐะทัะฐะฑะพัะบะฐ)
 - [ะขะตััะธัะพะฒะฐะฝะธะต](#ัะตััะธัะพะฒะฐะฝะธะต)
 - [ะะตะทะพะฟะฐัะฝะพััั](#ะฑะตะทะพะฟะฐัะฝะพััั)
 - [ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ](#ััััะฐะฝะตะฝะธะต-ะฝะตะฟะพะปะฐะดะพะบ)
 - [ะะพัะพะถะฝะฐั ะบะฐััะฐ](#ะดะพัะพะถะฝะฐั-ะบะฐััะฐ)

## ๐ ะงัะพ ะฝะพะฒะพะณะพ

### ะะพัะปะตะดะฝะธะต ะธะทะผะตะฝะตะฝะธั (ะคะตะฒัะฐะปั 2026)

#### ๐ ะัะฟัะฐะฒะปะตะฝะธั
- **ะัะฟัะฐะฒะปะตะฝะธะต ะพัะธะฑะพะบ GUI**
  - ะัะฟัะฐะฒะปะตะฝั ะฟัะพะฑะปะตะผั ั ะทะฐะณััะทะบะพะน FXML-ัะฐะนะปะพะฒ
  - ะัะฟัะฐะฒะปะตะฝั ะพัะธะฑะบะธ ะทะฐะณััะทะบะธ ะธะบะพะฝะพะบ ะฒ ะธะฝัะตััะตะนัะต
  - ะกัะฐะฑะธะปะธะทะธัะพะฒะฐะฝะฐ ัะฐะฑะพัะฐ JavaFX-ะบะพะผะฟะพะฝะตะฝัะพะฒ

- **ะัะฟัะฐะฒะปะตะฝะธะต ะพัะธะฑะบะธ H2 ะฑะฐะทั ะดะฐะฝะฝัั**
  - ะะพัะผะฐะปะธะทะพะฒะฐะฝั ะฟััะธ ะบ ัะฐะนะปะฐะผ ะฑะฐะทั ะดะฐะฝะฝัั
  - ะัะฟัะฐะฒะปะตะฝะฐ ะฟัะพะฑะปะตะผะฐ ั ะฟัััะผะธ ะฟัะธ ะทะฐะฟััะบะต ะฝะฐ Windows
  - ะะพะฑะฐะฒะปะตะฝะฐ ะบะพััะตะบัะฝะฐั ะฟะพะดะดะตัะถะบะฐ `AUTO_SERVER=TRUE` ะดะปั H2

#### โจ ะะพะฒัะต ััะฝะบัะธะธ
- **ะะตะฐะปะธะทะฐัะธั ะฑะธะฝะฐัะฝะพะณะพ ะฟัะพัะพะบะพะปะฐ**
  - ะะพะปะฝะฐั ัะตะฐะปะธะทะฐัะธั 28-ะฑะฐะนัะฝะพะณะพ ะทะฐะณะพะปะพะฒะบะฐ `PacketHeader`
  - ะะพะดะดะตัะถะบะฐ ะฑะธะฝะฐัะฝะพะณะพ ัะพัะผะฐัะฐ ะฟะฐะบะตัะพะฒ: `[Header: 28 ะฑะฐะนั][Payload: N ะฑะฐะนั][Checksum: 4 ะฑะฐะนัะฐ]`
  - CRC32 ะบะพะฝััะพะปัะฝะฐั ััะผะผะฐ ะดะปั ัะตะปะพััะฝะพััะธ ะดะฐะฝะฝัั

- **ะะฝัะตะณัะฐัะธั BinaryMessageCodec**
  - ะะพะดะตะบ `BinaryMessageCodec` ะธะฝัะตะณัะธัะพะฒะฐะฝ ะฒ ัะตัะฒะตัะฝัั ัะฐััั
  - ะะพะดะตะบ `BinaryMessageCodec` ะธะฝัะตะณัะธัะพะฒะฐะฝ ะฒ ะบะปะธะตะฝััะบัั ัะฐััั
  - ะะพะปะฝะฐั ะฟะพะดะดะตัะถะบะฐ ัะธััะพะฒะฐะฝะธั ะธ ัะถะฐัะธั ะฒ ะฑะธะฝะฐัะฝะพะผ ัะพัะผะฐัะต

- **ะะพะดัะปัะฝะฐั ัะธััะตะผะฐ ัะธััะพะฒะฐะฝะธั ัะตัะตะท SPI**
  - ะะตะฐะปะธะทะพะฒะฐะฝ ะธะฝัะตััะตะนั `EncryptionPlugin` ะดะปั ัะฐััะธััะตะผะพะน ะบัะธะฟัะพะณัะฐัะธะธ
  - AES-256-GCM ะฟะปะฐะณะธะฝ ะดะปั ัะธะผะผะตััะธัะฝะพะณะพ ัะธััะพะฒะฐะฝะธั ัะพะพะฑัะตะฝะธะน
  - RSA-4096 ะฟะปะฐะณะธะฝ ะดะปั ะพะฑะผะตะฝะฐ ะบะปััะฐะผะธ
  - ะะฒัะพะผะฐัะธัะตัะบะฐั ะทะฐะณััะทะบะฐ ะฒัะตั ะฟะปะฐะณะธะฝะพะฒ ัะตัะตะท ServiceLoader ะฟัะธ ััะฐััะต ัะตัะฒะตัะฐ
  - ะะพะดะดะตัะถะบะฐ ะดะพะฑะฐะฒะปะตะฝะธั ัะพะฑััะฒะตะฝะฝัั ะฟะปะฐะณะธะฝะพะฒ ัะธััะพะฒะฐะฝะธั

#### ๐ ะฃะปัััะตะฝะธั
- **ะะฐะทะดะตะปะตะฝะธะต ะปะพะณะพะฒ ะฟะพ ะผะพะดัะปัะผ**
  - ะะฑะฝะพะฒะปะตะฝะฐ ะบะพะฝัะธะณััะฐัะธั `logback.xml`
  - ะะพะณะธ ัะฐะทะดะตะปะตะฝั ะฟะพ ะผะพะดัะปัะผ: ัะตัะฒะตั, ะบะปะธะตะฝั, ัะธััะพะฒะฐะฝะธะต
  - ะฆะฒะตัะฝะพะน ะฒัะฒะพะด ะฒ ะบะพะฝัะพะปั ะธ ัะพัะฐัะธั ะปะพะณ-ัะฐะนะปะพะฒ

- **ะฃะฟัะพัะตะฝะธะต ะทะฐะฟััะบะฐ**
  - ะกะพะทะดะฐะฝ `build_and_run.bat` ะดะปั ะฟะพะปะฝะพะน ัะฑะพัะบะธ ะธ ะทะฐะฟััะบะฐ
  - ะกะพะทะดะฐะฝ `run_server.bat` ะดะปั ะทะฐะฟััะบะฐ ัะตัะฒะตัะฐ ั UTF-8 ะบะพะดะธัะพะฒะบะพะน
  - ะัะต bat-ัะบัะธะฟัั ะฟะพะดะดะตัะถะธะฒะฐัั ะบะพััะตะบัะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต ะบะธัะธะปะปะธัั

---

## โจ ะัะพะฑะตะฝะฝะพััะธ

- **ะกะพะฒัะตะผะตะฝะฝัะน Java 21**: ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒะธัััะฐะปัะฝัั ะฟะพัะพะบะพะฒ ะดะปั ะผะฐััะพะฒะพะณะพ ะฟะฐัะฐะปะปะตะปะธะทะผะฐ
- **ะะฐัะธััะฝะฝะพะต ะพะฑัะตะฝะธะต**: AES-256-GCM ัะธััะพะฒะฐะฝะธะต ั ะพะฑะผะตะฝะพะผ ะบะปััะฐะผะธ RSA-4096
- **ะะฒัะพะพะฑะฝะฐััะถะตะฝะธะต**: ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะฐััะถะตะฝะธะต ัะตัะฒะตัะพะฒ ัะตัะตะท UDP broadcast
- **ะะพะณะฐััะน GUI**: ะะฝัะตััะตะนั ะฝะฐ JavaFX ะดะปั ะบะปะธะตะฝัะฐ ะธ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ ัะตัะฒะตัะฐ
- **ะะปะฐะณะธะฝะฝะฐั ะฐััะธัะตะบัััะฐ**: ะะฐััะธััะตะผะฐั ัะธััะตะผะฐ ัะธััะพะฒะฐะฝะธั ัะตัะตะท SPI
- **ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝะพััั**: ะัะพัะธะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะฐะฒะฐัะฐัั, ะปะธัะฝัะต/ะณััะฟะฟะพะฒัะต ัะฐัั, ะธััะพัะธั ัะพะพะฑัะตะฝะธะน
- **ะัััะพะตะฝะฝะฐั ะะ**: ะะฐะทะฐ ะดะฐะฝะฝัั H2 ะดะปั ะฟะตััะธััะตะฝัะฝะพััะธ ะดะฐะฝะฝัั
- **ะะตะฐะปัะฝะพะต ะฒัะตะผั**: ะะณะฝะพะฒะตะฝะฝัะต ัะพะพะฑัะตะฝะธั ั ะธะฝะดะธะบะฐัะพัะฐะผะธ ะฝะฐะฑะพัะฐ ัะตะบััะฐ ะธ ัะฒะตะดะพะผะปะตะฝะธัะผะธ ะพ ะฟัะพััะตะฝะธะธ

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโ         UDP/TCP         โโโโโโโโโโโโโโโโโโโโ
โ   ChatClient     โ โโโโโ Discovery โโโโโโ โ   ChatServer     โ
โ  (JavaFX GUI)    โ โโโโโ Encrypted โโโโโโ โ  (Netty Server)  โ
โโโโโโโโโโโโโโโโโโโโ         AES-256          โโโโโโโโโโโโโโโโโโโโ
                                                   โ
                                            โโโโโโโโดโโโโโโโ
                                            โ   H2 DB     โ
                                            โโโโโโโโโโโโโโโ
```

## ๐ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

| ะขะตัะฝะพะปะพะณะธั | ะะตััะธั | ะะฐะทะฝะฐัะตะฝะธะต |
|------------|---------|------------|
| Java | 21 (LTS) | ะัะฝะพะฒะฝะพะน ัะทัะบ ั ะฒะธัััะฐะปัะฝัะผะธ ะฟะพัะพะบะฐะผะธ |
| Netty | 4.1.109.Final | ะัะธะฝััะพะฝะฝัะน ัะตัะตะฒะพะน ััะตะนะผะฒะพัะบ |
 | JavaFX | 21.0.1 | ะกะพะฒัะตะผะตะฝะฝัะน GUI ะดะปั ะดะตัะบัะพะฟะฐ |
 | H2 Database | 2.2.224 | ะัััะพะตะฝะฝะฐั SQL ะฑะฐะทะฐ ะดะฐะฝะฝัั |
  | Bouncy Castle | 1.77 | ะัะธะฟัะพะณัะฐัะธัะตัะบะธะต ะฟัะธะผะธัะธะฒั |
  | JUnit | 5.10.2 | ะะพะดัะปัะฝะพะต ะธ ะธะฝัะตะณัะฐัะธะพะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต |
  | Logback | 1.4.14 | ะคัะตะนะผะฒะพัะบ ะปะพะณะธัะพะฒะฐะฝะธั ั ะผะพะดัะปัะฝะพะน ะบะพะฝัะธะณััะฐัะธะตะน |
  | Maven | 3.9.6 | ะกะฑะพัะบะฐ ะธ ัะฟัะฐะฒะปะตะฝะธะต ะทะฐะฒะธัะธะผะพัััะผะธ |
  | Jackson | 2.16.1 | ะกะตัะธะฐะปะธะทะฐัะธั JSON |
  | Encryption API | 1.0.0 | ะะฝัะตััะตะนั ะฟะปะฐะณะธะฝะพะฒ ัะธััะพะฒะฐะฝะธั (SPI) |
  | AES Plugin | 1.0.0 | ะะตะฐะปะธะทะฐัะธั AES-256-GCM ัะตัะตะท SPI |
  | RSA Plugin | 1.0.0 | ะะตะฐะปะธะทะฐัะธั RSA-4096 ัะตัะตะท SPI |

## ๐ฆ ะขัะตะฑะพะฒะฐะฝะธั

### ะะฑัะทะฐัะตะปัะฝัะต

- **Java 21** ะธะปะธ ะฒััะต ([ะกะบะฐัะฐัั](https://www.oracle.com/java/technologies/downloads/))
- **Maven 3.9** ะธะปะธ ะฒััะต ([ะกะบะฐัะฐัั](https://maven.apache.org/download.cgi))

### ะะฟัะธะพะฝะฐะปัะฝัะต

- **JavaFX SDK** (ะพะฑััะฝะพ ะฒะบะปัััะฝ ะฒ JDK 21)
- **IDE** (IntelliJ IDEA, Eclipse ะธะปะธ NetBeans)

### ะะปะฐะณะธะฝั ัะธััะพะฒะฐะฝะธั

ะะปะฐะณะธะฝั ัะธััะพะฒะฐะฝะธั ะฟะพะดะบะปััะฐัััั ะบะฐะบ Maven ะทะฐะฒะธัะธะผะพััะธ ะฒ ะผะพะดัะปะธ ัะตัะฒะตัะฐ ะธ ะบะปะธะตะฝัะฐ:

```xml
<!-- API ะฟะปะฐะณะธะฝะพะฒ ัะธััะพะฒะฐะฝะธั -->
<dependency>
    <groupId>com.chatv2</groupId>
    <artifactId>chat-encryption-api</artifactId>
    <version>1.0.0</version>
</dependency>

<!-- ะะปะฐะณะธะฝ AES-256-GCM -->
<dependency>
    <groupId>com.chatv2</groupId>
    <artifactId>chat-encryption-aes</artifactId>
    <version>1.0.0</version>
</dependency>

<!-- ะะปะฐะณะธะฝ RSA-4096 -->
<dependency>
    <groupId>com.chatv2</groupId>
    <artifactId>chat-encryption-rsa</artifactId>
    <version>1.0.0</version>
</dependency>
```

## ๐ ะัััััะน ััะฐัั

### ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ ัะตัะตะท BAT-ัะบัะธะฟัั (Windows)

ะกะฐะผัะน ะฟัะพััะพะน ัะฟะพัะพะฑ ะทะฐะฟััะบะฐ ะฝะฐ Windows ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะณะพัะพะฒัั ัะบัะธะฟัะพะฒ:

#### ะะพะปะฝะฐั ัะฑะพัะบะฐ ะธ ะทะฐะฟััะบ

```batch
# ะัะฟะพะปะฝะธัั ะฟะพะปะฝัั ัะฑะพัะบั ะฟัะพะตะบัะฐ ะธ ะทะฐะฟัััะธัั ัะตัะฒะตั
build_and_run.bat
```

ะญัะพั ัะบัะธะฟั:
1. ะะตัะตะบะปััะฐะตั ะบะพะดะธัะพะฒะบั ะบะพะฝัะพะปะธ ะฝะฐ UTF-8 ะดะปั ะบะพััะตะบัะฝะพะณะพ ะพัะพะฑัะฐะถะตะฝะธั ะบะธัะธะปะปะธัั
2. ะัะฟะพะปะฝัะตั `mvn clean package -DskipTests` ะดะปั ัะฑะพัะบะธ ะฒัะตั ะผะพะดัะปะตะน
3. ะะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัะพะดะธั JAR-ัะฐะนะป ะธ ะทะฐะฟััะบะฐะตั ัะตัะฒะตั

#### ะะฐะฟััะบ ัะตัะฒะตัะฐ

```batch
# ะะฐะฟััะบ ัะตัะฒะตัะฐ (ะฟัะตะดะฒะฐัะธัะตะปัะฝะพ ะดะพะปะถะตะฝ ะฑััั ัะพะฑัะฐะฝ ะฟัะพะตะบั)
run_server.bat
```

ะญัะพั ัะบัะธะฟั:
1. ะฃััะฐะฝะฐะฒะปะธะฒะฐะตั ะบะพะดะธัะพะฒะบั UTF-8 (`chcp 65001`)
2. ะะฐะฟััะบะฐะตั ัะตัะฒะตั ะธะท JAR-ัะฐะนะปะฐ `chat-apps/chat-server-launcher/target/chat-server-launcher-1.0.0-jar-with-dependencies.jar`
3. ะะตัะตะดะฐัั ะฒัะต ะฐัะณัะผะตะฝัั ะบะพะผะฐะฝะดะฝะพะน ัััะพะบะธ ะฟัะธะปะพะถะตะฝะธั

#### ะะฐะฟััะบ ะบะปะธะตะฝัะฐ

ะะปั ะทะฐะฟััะบะฐ ะบะปะธะตะฝัะฐ ะธัะฟะพะปัะทัะตััั ะฐะฝะฐะปะพะณะธัะฝัะน ะฟะพะดัะพะด:

```batch
# ะะพัะปะต ัะฑะพัะบะธ ะฟัะพะตะบัะฐ, ะทะฐะฟัััะธัะต ะบะปะธะตะฝั
java -jar chat-apps/chat-client-launcher/target/chat-client-launcher-1.0.0-jar-with-dependencies.jar
```

ะะปะธ ัะพะทะดะฐะนัะต ัะฐะนะป `run_client.bat`:
```batch
@echo off
chcp 65001 >nul
echo Starting ChatV2 Client...
java -jar chat-apps/chat-client-launcher/target/chat-client-launcher-1.0.0-jar-with-dependencies.jar %*
pause
```

### ะกะฑะพัะบะฐ ะฟัะพะตะบัะฐ (Maven)

```bash
# ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั
git clone <repository-url>
cd Chatv2

# ะกะฑะพัะบะฐ ะฒัะตั ะผะพะดัะปะตะน
mvn clean install

# ะัะพะฟัััะธัั ัะตััั
mvn clean install -DskipTests

# ะกะฑะพัะบะฐ ะบะพะฝะบัะตัะฝะพะณะพ ะผะพะดัะปั
mvn clean install -pl chat-server

# ะกะพะทะดะฐะฝะธะต ะธัะฟะพะปะฝัะตะผัั JAR-ัะฐะนะปะพะฒ
mvn clean package
```

### ะะฐะฟััะบ ัะตัะฒะตัะฐ

```bash
# ะะตัะตัะพะด ะฒ ะดะธัะตะบัะพัะธั launcher'ะฐ
cd chat-apps/chat-server-launcher

# ะะฐะฟััะบ ัะตัะฒะตัะฐ
java -jar target/chat-server-launcher-1.0.0-jar-with-dependencies.jar

# ะะปะธ ั ะฟะพะผะพััั Maven
mvn exec:java -Dexec.mainClass="com.chatv2.launcher.server.ServerLauncher"
```

**ะกะตัะฒะตั ะฒัะฟะพะปะฝะธั ัะปะตะดัััะธะต ะดะตะนััะฒะธั:**
- ะะฐะฟัััะธััั ะฝะฐ ะฟะพััั `8080` (ะฝะฐัััะฐะธะฒะฐะตััั)
- ะัะดะตั ัะปััะฐัั UDP broadcast ะฝะฐ ะฟะพััั `9999`
- ะะฝะธัะธะฐะปะธะทะธััะตั ะฒัััะพะตะฝะฝัั ะะ H2 ะฒ `data/chat.db`
- ะะฐะฟัััะธั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั (JavaFX GUI)
- ะะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะทะธั ะฒัะต ะฟะปะฐะณะธะฝั ัะธััะพะฒะฐะฝะธั ัะตัะตะท SPI:
  - AES-256-GCM ะฟะปะฐะณะธะฝ (ะฐะบัะธะฒะฝัะน ะฟะพ ัะผะพะปัะฐะฝะธั)
  - RSA-4096 ะฟะปะฐะณะธะฝ (ะดะปั ะพะฑะผะตะฝะฐ ะบะปััะฐะผะธ)

### ะะฐะฟััะบ ะบะปะธะตะฝัะฐ

```bash
# ะะตัะตัะพะด ะฒ ะดะธัะตะบัะพัะธั launcher'ะฐ
cd chat-apps/chat-client-launcher

# ะะฐะฟััะบ ะบะปะธะตะฝัะฐ
java -jar target/chat-client-launcher-1.0.0-jar-with-dependencies.jar

# ะะปะธ ั ะฟะพะผะพััั Maven
mvn exec:java -Dexec.mainClass="com.chatv2.launcher.client.ClientLauncher"
```

**ะะปะธะตะฝั ะฒัะฟะพะปะฝะธั ัะปะตะดัััะธะต ะดะตะนััะฒะธั:**
- ะะพะบะฐะถะตั ัะบัะฐะฝ ะฒัะฑะพัะฐ ัะตัะฒะตัะฐ (ะฐะฒัะพะพะฑะฝะฐััะถะตะฝะฝัะต ัะตัะฒะตัั)
- ะะฐะฟัะพัะธั ะฒัะพะด ะธะปะธ ัะตะณะธัััะฐัะธั
- ะัะพะฑัะฐะทะธั ะพัะฝะพะฒะฝะพะน ะธะฝัะตััะตะนั ัะฐัะฐ

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะะพะฝัะธะณััะฐัะธั ัะตัะฒะตัะฐ

ะกะพะทะดะฐะนัะต/ะพััะตะดะฐะบัะธััะนัะต `config/server-config.yaml`:

```yaml
server:
  host: "0.0.0.0"
  port: 8080
  name: "ChatV2 Server"

udp:
  enabled: true
  multicast_address: "239.255.255.250"
  port: 9999
  broadcast_interval_seconds: 5

database:
  path: "data/chat.db"
  connection_pool_size: 10

encryption:
  required: true
  default_plugin: "AES-256"
  rsa_key_size: 4096

session:
  token_expiration_seconds: 3600
  refresh_token_expiration_days: 7

 logging:
   level: "INFO"
   file: "logs/server.log"
 ```

### ะะพะณะธัะพะฒะฐะฝะธะต

ะัะพะตะบั ะธัะฟะพะปัะทัะตั **Logback** ะดะปั ะปะพะณะธัะพะฒะฐะฝะธั ั ะผะพะดัะปัะฝะพะน ะบะพะฝัะธะณััะฐัะธะตะน ะฒ ัะฐะนะปะต `chat-common/src/main/resources/logback.xml`.

#### ะัะพะฑะตะฝะฝะพััะธ ะบะพะฝัะธะณััะฐัะธะธ

- **ะฆะฒะตัะฝะพะน ะฒัะฒะพะด ะฒ ะบะพะฝัะพะปั:** ะะฐะทะฝัะต ัะฒะตัะฐ ะดะปั ััะพะฒะฝะตะน ะปะพะณะธัะพะฒะฐะฝะธั
- **ะะฐะทะดะตะปะตะฝะธะต ะปะพะณะพะฒ ะฟะพ ะผะพะดัะปัะผ:** ะัะดะตะปัะฝัะต ัะฐะนะปั ะดะปั ัะตัะฒะตัะฐ, ะบะปะธะตะฝัะฐ ะธ ัะธััะพะฒะฐะฝะธั
- **ะะพัะฐัะธั ะปะพะณะพะฒ:** ะะพ ัะฐะทะผะตัั (10MB) ะธ ะฒัะตะผะตะฝะธ (ะตะถะตะดะฝะตะฒะฝะพ)
- **ะกะถะฐัะธะต:** ะััะธะฒะธัะพะฒะฐะฝะธะต ััะฐััั ะปะพะณะพะฒ ะฒ GZIP
- **UTF-8 ะบะพะดะธัะพะฒะบะฐ:** ะะพะปะฝะฐั ะฟะพะดะดะตัะถะบะฐ ะบะธัะธะปะปะธัั ะฒ ะปะพะณะฐั

#### ะะพะณ-ัะฐะนะปั

| ะคะฐะนะป | ะะฐะทะฝะฐัะตะฝะธะต | ะคะธะปััั ะฟะฐะบะตัะพะฒ |
|------|------------|----------------|
| `logs/application.log` | ะะฑัะธะน ะปะพะณ ะฒัะตั ะฟัะธะปะพะถะตะฝะธะน | ะัะต ะฟะฐะบะตัั |
| `logs/server.log` | ะะพะณ ัะตัะฒะตัะฐ | `com.chatv2.server.*`, `com.chatv2.launcher.server.*` |
| `logs/client.log` | ะะพะณ ะบะปะธะตะฝัะฐ | `com.chatv2.client.*`, `com.chatv2.launcher.client.*` |
| `logs/encryption.log` | ะะพะณ ะผะพะดัะปะตะน ัะธััะพะฒะฐะฝะธั | `com.chatv2.encryption.*` |

#### ะฃัะพะฒะฝะธ ะปะพะณะธัะพะฒะฐะฝะธั

| ะะฐะบะตั | ะฃัะพะฒะตะฝั | ะะฟะธัะฐะฝะธะต |
|-------|---------|----------|
| `com.chatv2.server` | DEBUG | ะะพะดัะพะฑะฝัะต ะปะพะณะธ ัะตัะฒะตัะฝะพะน ัะฐััะธ |
| `com.chatv2.launcher.server` | DEBUG | ะะพะณ ะทะฐะฟััะบะฐ ัะตัะฒะตัะฐ |
| `com.chatv2.client` | DEBUG | ะะพะดัะพะฑะฝัะต ะปะพะณะธ ะบะปะธะตะฝััะบะพะน ัะฐััะธ |
| `com.chatv2.launcher.client` | DEBUG | ะะพะณ ะทะฐะฟััะบะฐ ะบะปะธะตะฝัะฐ |
| `com.chatv2.encryption` | INFO | ะะพะณ ัะธััะพะฒะฐะฝะธั (ะฑะตะท ะปะธัะฝะธั ะดะตัะฐะปะตะน) |
| `com.chatv2.common` | INFO | ะะฑัะธะต ะบะพะผะฟะพะฝะตะฝัั |
| `root` | INFO | ะะพัะฝะตะฒะพะน ััะพะฒะตะฝั |

#### ะกัััะบัััะฐ ะบะพะฝัะธะณััะฐัะธะธ logback.xml

```xml
<configuration scan="true" scanPeriod="30 seconds">
    <!-- ะะพะฝัะพะปัะฝัะน ะฐะฟะฟะตะฝะดะตั ั ัะฒะตัะฝัะผ ะฒัะฒะพะดะพะผ -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <pattern>%d{HH:mm:ss.SSS} [%thread] %highlight(%-5level) %cyan(%logger{36}) - %msg%n</pattern>
        <charset>UTF-8</charset>
    </appender>

    <!-- ะคะฐะนะปะพะฒัะต ะฐะฟะฟะตะฝะดะตัั ั ัะพัะฐัะธะตะน ะธ ัะธะปัััะฐัะธะตะน ะฟะพ ะผะพะดัะปัะผ -->
    <appender name="FILE_SERVER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/server.log</file>
        <filter class="ch.qos.logback.core.filter.EvaluatorFilter">
            <expression>logger.startsWith("com.chatv2.server") || logger.startsWith("com.chatv2.launcher.server")</expression>
        </filter>
    </appender>
    <!-- ... ะฐะฝะฐะปะพะณะธัะฝะพ ะดะปั FILE_CLIENT ะธ FILE_ENCRYPTION ... -->

    <!-- ะะฐัััะพะนะบะฐ ััะพะฒะฝะตะน ะฟะพ ะฟะฐะบะตัะฐะผ -->
    <logger name="com.chatv2.server" level="DEBUG">
        <appender-ref ref="FILE_SERVER"/>
    </logger>
</configuration>
```

#### ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะัะพัะผะพัั ะปะพะณะพะฒ ัะตัะฒะตัะฐ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
tail -f logs/server.log

# ะัะพัะผะพัั ะฒัะตั ะปะพะณะพะฒ
cat logs/application.log

# ะะพะธัะบ ะพัะธะฑะพะบ ะฒ ะปะพะณะฐั
grep ERROR logs/*.log
```

 ### ะะพะฝัะธะณััะฐัะธั ะบะปะธะตะฝัะฐ

ะกะพะทะดะฐะนัะต/ะพััะตะดะฐะบัะธััะนัะต `config/client-config.yaml`:

```yaml
client:
  name: "ChatV2 Client"
  version: "1.0.0"

discovery:
  enabled: true
  multicast_address: "239.255.255.250"
  port: 9999
  timeout_seconds: 30

connection:
  reconnect_attempts: 5
  reconnect_delay_seconds: 5
  heartbeat_interval_seconds: 30

encryption:
  enabled: true

ui:
  theme: "dark"
  language: "ru"
  avatar_size: 64
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
 chatv2/
 โโโ pom.xml                                    # ะะพัะฝะตะฒะพะน Maven POM
 โโโ README.md                                  # ะญัะพั ัะฐะนะป
 โโโ TECHNICAL_SPEC.md                          # ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต
 โโโ PROTOCOL_SPEC.md                           # ะกะฟะตัะธัะธะบะฐัะธั ะฟัะพัะพะบะพะปะฐ
 โโโ DEVELOPMENT_PLAN.md                        # ะะปะฐะฝ ัะฐะทะฒะธัะธั
 โโโ build_and_run.bat                          # ะกะบัะธะฟั ะฟะพะปะฝะพะน ัะฑะพัะบะธ ะธ ะทะฐะฟััะบะฐ (Windows)
 โโโ run_server.bat                             # ะกะบัะธะฟั ะทะฐะฟััะบะฐ ัะตัะฒะตัะฐ (Windows)
 โโโ build_and_test.bat                         # ะกะบัะธะฟั ัะฑะพัะบะธ ะธ ัะตััะธัะพะฒะฐะฝะธั
 โ
โโโ chat-common/                               # ะะฑัะธะน ะผะพะดัะปั
โ   โโโ pom.xml
โ   โโโ src/main/java/com/chatv2/common/
โ       โโโ model/                             # ะะพะดะตะปะธ ะดะฐะฝะฝัั
โ       โโโ protocol/                          # ะะธะฝะฐัะฝัะน ะฟัะพัะพะบะพะป
โ       โโโ crypto/                            # ะัะธะฟัะพะณัะฐัะธัะตัะบะธะต ััะธะปะธัั
โ       โโโ exception/                         # ะะฐััะพะผะฝัะต ะธัะบะปััะตะฝะธั
โ
โโโ chat-server/                               # ะกะตัะฒะตัะฝัะน ะผะพะดัะปั
โ   โโโ pom.xml
โ   โโโ src/main/java/com/chatv2/server/
โ       โโโ core/                              # ะฏะดัะพ ัะตัะฒะตัะฐ
โ       โโโ manager/                           # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ       โโโ handler/                           # Netty ะพะฑัะฐะฑะพััะธะบะธ
โ       โโโ storage/                           # ะะพัััะฟ ะบ ะะ
โ       โโโ gui/                               # ะะดะผะธะฝ-ะธะฝัะตััะตะนั
โ
โโโ chat-client/                               # ะะปะธะตะฝััะบะธะน ะผะพะดัะปั
โ   โโโ pom.xml
โ   โโโ src/main/java/com/chatv2/client/
โ       โโโ core/                              # ะฏะดัะพ ะบะปะธะตะฝัะฐ
โ       โโโ discovery/                         # UDP ะพะฑะฝะฐััะถะตะฝะธะต
โ       โโโ gui/                               # JavaFX UI
โ       โโโ network/                           # ะกะตัะตะฒะพะน ะบะปะธะตะฝั
โ
 โโโ chat-encryption-plugins/                   # ะะปะฐะณะธะฝั ัะธััะพะฒะฐะฝะธั (SPI)
 โ   โโโ chat-encryption-api/                   # API ะธ ะธะฝัะตััะตะนั EncryptionPlugin
 โ   โโโ chat-encryption-aes/                   # ะะตะฐะปะธะทะฐัะธั AES-256-GCM
 โ   โโโ chat-encryption-rsa/                   # ะะตะฐะปะธะทะฐัะธั RSA-4096
โ
โโโ chat-apps/                                 # ะะฐัะฝัะตัั ะฟัะธะปะพะถะตะฝะธะน
    โโโ chat-server-launcher/
    โโโ chat-client-launcher/
```

### ะะฟะธัะฐะฝะธะต ะผะพะดัะปะตะน

| ะะพะดัะปั | ะะฟะธัะฐะฝะธะต | ะกัะฐััั |
|--------|----------|--------|
| chat-common | ะะฑัะธะต ะผะพะดะตะปะธ, ะฟัะพัะพะบะพะป, ััะธะปะธัั | โ ะะพัะพะฒะพ |
| chat-encryption-api | ะะฝัะตััะตะนั ะฟะปะฐะณะธะฝะพะฒ ัะธััะพะฒะฐะฝะธั (SPI) | โ ะะพัะพะฒะพ |
| chat-encryption-aes | ะะตะฐะปะธะทะฐัะธั AES-256-GCM ัะตัะตะท SPI | โ ะะพัะพะฒะพ |
| chat-encryption-rsa | ะะตะฐะปะธะทะฐัะธั RSA-4096 ัะตัะตะท SPI | โ ะะพัะพะฒะพ |
| chat-server | ะกะตัะฒะตัะฝะฐั ะปะพะณะธะบะฐ ะธ GUI | โ ะะพัะพะฒะพ |
| chat-client | ะะปะธะตะฝััะบะฐั ะปะพะณะธะบะฐ ะธ GUI | โ๏ธ ะ ัะฐะทัะฐะฑะพัะบะต |
| chat-server-launcher | ะะฐะฟััะบ ัะตัะฒะตัะฐ | โ ะะพัะพะฒะพ |
| chat-client-launcher | ะะฐะฟััะบ ะบะปะธะตะฝัะฐ | โ ะะพัะพะฒะพ |

## ๐ ะััะธัะตะบัััะฐ ะฟัะพัะพะบะพะปะฐ

### ะะฑัะฐั ะธะฝัะพัะผะฐัะธั

ะัะธะปะพะถะตะฝะธะต ะธัะฟะพะปัะทัะตั ะฑะธะฝะฐัะฝัะน ะฟัะพัะพะบะพะป ะฟะพะฒะตัั TCP ัะพ ัะปะตะดัััะธะผะธ ัะฐัะฐะบัะตัะธััะธะบะฐะผะธ:

- **ะคะพัะผะฐั ะฟะฐะบะตัะฐ:** `[Header: 28 ะฑะฐะนั][Payload: N ะฑะฐะนั][Checksum: 4 ะฑะฐะนัะฐ]`
- **ะะฑัะธะน ัะฐะทะผะตั:** 32 + N ะฑะฐะนั (ะณะดะต N โ ะดะปะธะฝะฐ ะฟะพะปะตะทะฝะพะน ะฝะฐะณััะทะบะธ)
- **ะะพะปะตะทะฝะฐั ะฝะฐะณััะทะบะฐ:** JSON-ะบะพะดะธัะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต (ะพะฟัะธะพะฝะฐะปัะฝะพ ัะธััะพะฒะฐะฝะฝัะต)
- **ะะพะฝััะพะปัะฝะฐั ััะผะผะฐ:** CRC32 ะดะปั ะทะฐะณะพะปะพะฒะบะฐ ะธ ะฟะพะปะตะทะฝะพะน ะฝะฐะณััะทะบะธ
- **ะจะธััะพะฒะฐะฝะธะต:** AES-256-GCM ะดะปั ะฒัะตั ะฐััะตะฝัะธัะธัะธัะพะฒะฐะฝะฝัั ัะพะพะฑัะตะฝะธะน
- **ะะฑะผะตะฝ ะบะปััะฐะผะธ:** RSA-4096 ะดะปั ะฟะตัะฒะพะฝะฐัะฐะปัะฝะพะณะพ ััะบะพะฟะพะถะฐัะธั
- **ะะฑะฝะฐััะถะตะฝะธะต:** UDP broadcast ะฝะฐ 239.255.255.250:9999

### ะกัััะบัััะฐ ะฟะฐะบะตัะฐ (Packet Format)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                          ะกะขะะฃะะขะฃะะ ะะะะะะะะะ ะะะะะขะ                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                                  โ
โ  ะกะผะตัะตะฝะธะต     ะะฐะทะผะตั (ะฑะฐะนั)   ะะพะปะต                  ะะฟะธัะฐะฝะธะต                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                                  โ
โ  0x00          4               MAGIC_NUMBER           ะะดะตะฝัะธัะธะบะฐัะพั ะฟัะพัะพะบะพะปะฐ     โ
โ                                                         "CHAT" (0x43484154)      โ
โ  0x04          2               MESSAGE_TYPE           ะขะธะฟ ัะพะพะฑัะตะฝะธั (enum)       โ
โ  0x06          1               VERSION                ะะตััะธั ะฟัะพัะพะบะพะปะฐ (0x01)    โ
โ  0x07          1               FLAGS                  ะคะปะฐะณะธ (ะฑะธัะพะฒะฐั ะผะฐัะบะฐ)      โ
โ  0x08          8               MESSAGE_ID             UUID ัะพะพะฑัะตะฝะธั (8 ะฑะฐะนั)     โ
โ  0x10          4               PAYLOAD_LENGTH         ะะปะธะฝะฐ ะฟะพะปะตะทะฝะพะน ะฝะฐะณััะทะบะธ    โ
โ  0x14          8               TIMESTAMP              Unix epoch (ms)             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  0x1C          28              HEADER                 ะัะพะณะพ: 28 ะฑะฐะนั             โ
โ  0x1C+N        N               PAYLOAD                ะะพะปะตะทะฝะฐั ะฝะฐะณััะทะบะฐ (JSON)    โ
โ  0x1C+N+4      4               CHECKSUM               CRC32 (Header + Payload)    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  ะะขะะะ         32 + N                                  ะะะะข                       โ
โ                                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพะปั ะทะฐะณะพะปะพะฒะบะฐ (PacketHeader)

| ะะพะปะต | ะะฐะทะผะตั | ะะฟะธัะฐะฝะธะต | ะะพะฝััะฐะฝัั |
|------|--------|----------|-----------|
| `MAGIC` | 4 ะฑะฐะนัะฐ | Magic number "CHAT" | `0x43484154` |
| `MESSAGE_TYPE` | 2 ะฑะฐะนัะฐ | ะขะธะฟ ัะพะพะฑัะตะฝะธั (uint16) | enum `ProtocolMessageType` |
| `VERSION` | 1 ะฑะฐะนั | ะะตััะธั ะฟัะพัะพะบะพะปะฐ | `0x01` |
| `FLAGS` | 1 ะฑะฐะนั | ะคะปะฐะณะธ (ะฑะธัะพะฒะฐั ะผะฐัะบะฐ) | ัะผ. ะฝะธะถะต |
| `MESSAGE_ID` | 8 ะฑะฐะนั | UUID ัะพะพะฑัะตะฝะธั (compact) | ะฟะตัะฒัะต 8 ะฑะฐะนั UUID |
| `PAYLOAD_LENGTH` | 4 ะฑะฐะนัะฐ | ะะปะธะฝะฐ ะฟะพะปะตะทะฝะพะน ะฝะฐะณััะทะบะธ | uint32 |
| `TIMESTAMP` | 8 ะฑะฐะนั | ะัะตะผั ัะพะทะดะฐะฝะธั (ms) | Unix epoch |

### ะคะปะฐะณะธ (Flags)

| ะะธั | ะะฐัะบะฐ | ะะฐะทะฒะฐะฝะธะต | ะะฟะธัะฐะฝะธะต |
|-----|-------|----------|----------|
| 7 | `0x80` | `ENCRYPTED` | ะะพะปะตะทะฝะฐั ะฝะฐะณััะทะบะฐ ะทะฐัะธััะพะฒะฐะฝะฐ AES-256-GCM |
| 6 | `0x40` | `COMPRESSED` | ะะพะปะตะทะฝะฐั ะฝะฐะณััะทะบะฐ ัะถะฐัะฐ (GZIP) |
| 5 | `0x20` | `URGENT` | ะกัะพัะฝะพะต ัะพะพะฑัะตะฝะธะต (ะฒััะพะบะธะน ะฟัะธะพัะธัะตั) |
| 4 | `0x10` | `ACK_REQUIRED` | ะขัะตะฑัะตััั ะฟะพะดัะฒะตัะถะดะตะฝะธะต ะฟะพะปััะตะฝะธั |
| 3 | `0x08` | `REPLY` | ะญัะพ ะพัะฒะตั ะฝะฐ ะฟัะตะดัะดััะตะต ัะพะพะฑัะตะฝะธะต |

### CRC32 ะะพะฝััะพะปัะฝะฐั ััะผะผะฐ

- **ะะฐัะฟะพะปะพะถะตะฝะธะต:** ะะพัะปะตะดะฝะธะต 4 ะฑะฐะนัะฐ ะฟะฐะบะตัะฐ
- **ะะพะบััะฒะฐะตั:** ะะฐะณะพะปะพะฒะพะบ (28 ะฑะฐะนั) + ะะพะปะตะทะฝะฐั ะฝะฐะณััะทะบะฐ (N ะฑะฐะนั)
- **ะะปะณะพัะธัะผ:** ะกัะฐะฝะดะฐััะฝัะน CRC32 (Java `java.util.zip.CRC32`)
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะัะพะฒะตัะบะฐ ัะตะปะพััะฝะพััะธ ะดะฐะฝะฝัั ะฟัะธ ะฟะตัะตะดะฐัะต

### ะะพะดะดะตัะถะบะฐ ัะธััะพะฒะฐะฝะธั

ะัะพัะพะบะพะป ะฟะพะดะดะตัะถะธะฒะฐะตั ัะธััะพะฒะฐะฝะธะต ะฝะฐ ะฝะตัะบะพะปัะบะธั ััะพะฒะฝัั:

1. **ะะพะปั ะฒ ะทะฐะณะพะปะพะฒะบะต:**
   - ะคะปะฐะณ `ENCRYPTED` (0x80) ัะบะฐะทัะฒะฐะตั, ััะพ ะฟะพะปะตะทะฝะฐั ะฝะฐะณััะทะบะฐ ะทะฐัะธััะพะฒะฐะฝะฐ
   - ะขะธะฟั ัะพะพะฑัะตะฝะธะน ะฐััะตะฝัะธัะธะบะฐัะธะธ ะธ ะพะฑะผะตะฝะฐ ะบะปััะฐะผะธ ะฝะต ัะธััััััั

2. **ะัะพัะตัั ัะธััะพะฒะฐะฝะธั:**
   - **ะะฑะผะตะฝ ะบะปััะฐะผะธ:** RSA-4096 ั OAEP padding ะดะปั ะฟะตัะฒะพะฝะฐัะฐะปัะฝะพะณะพ ััะบะพะฟะพะถะฐัะธั
   - **ะกะตััะธะพะฝะฝะพะต ัะธััะพะฒะฐะฝะธะต:** AES-256-GCM ะดะปั ะฒัะตั ัะพะพะฑัะตะฝะธะน ะฟะพัะปะต ะฐััะตะฝัะธัะธะบะฐัะธะธ
   - **IV:** 128-ะฑะธัะฝัะน ัะปััะฐะนะฝัะน ะฒะตะบัะพั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ ะดะปั ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั
   - **Tag:** 128-ะฑะธัะฝัะน ัะตะณ ะฐััะตะฝัะธัะธะบะฐัะธะธ GCM

### ะะตะฐะปะธะทะฐัะธั ะฒ ะบะพะดะต

ะัะฝะพะฒะฝัะต ะบะปะฐััั ัะตะฐะปะธะทะฐัะธะธ:

- **`PacketHeader`** - 28-ะฑะฐะนัะฝัะน ะทะฐะณะพะปะพะฒะพะบ ะฟะฐะบะตัะฐ (`chat-common/src/main/java/com/chatv2/common/protocol/PacketHeader.java`)
  - ะะตัะพะดั `read()` ะธ `write()` ะดะปั ัะฐะฑะพัั ั ByteBuffer
  - ะะฐะปะธะดะฐัะธั ะฟะพะปะตะน ัะตัะตะท ะผะตัะพะด `isValid()`
  - ะะพะผะฟะฐะบัะฝะพะต ััะฐะฝะตะฝะธะต UUID (8 ะฑะฐะนั)

- **`BinaryMessageCodec`** - Netty ะบะพะดะตะบ ะดะปั ะบะพะดะธัะพะฒะฐะฝะธั/ะดะตะบะพะดะธัะพะฒะฐะฝะธั (`chat-common/src/main/java/com/chatv2/common/protocol/BinaryMessageCodec.java`)
  - ะะพะดะธัะพะฒะฐะฝะธะต: `ChatMessage` โ `ByteBuf`
  - ะะตะบะพะดะธัะพะฒะฐะฝะธะต: `ByteBuf` โ `ChatMessage`
  - ะะฒัะพะผะฐัะธัะตัะบะธะน ัะฐัััั ะธ ะฟัะพะฒะตัะบะฐ CRC32
  - ะะพะดะดะตัะถะบะฐ ัะธััะพะฒะฐะฝะฝัั ะฟะพะปะตะทะฝัั ะฝะฐะณััะทะพะบ

### ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

```java
// ะกะพะทะดะฐะฝะธะต ะทะฐะณะพะปะพะฒะบะฐ
PacketHeader header = PacketHeader.create(
    ProtocolMessageType.MESSAGE_SEND_REQ.getCode(),
    PacketHeader.FLAG_ENCRYPTED,
    messageId,
    payloadBytes.length
);

// ะะพะดะธัะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธั
BinaryMessageCodec codec = new BinaryMessageCodec();
ChannelHandlerContext ctx = ...;
ChatMessage message = new ChatMessage(...);
List<Object> out = new ArrayList<>();
codec.encode(ctx, message, out);
ByteBuf packet = (ByteBuf) out.get(0);
```

 **ะะพะดัะพะฑะฝะฐั ะธะฝัะพัะผะฐัะธั:** ะกะผะพััะธัะต ะฟะพะปะฝัั ัะฟะตัะธัะธะบะฐัะธั ะฒ ัะฐะนะปะต [PROTOCOL_SPEC.md](PROTOCOL_SPEC.md)

## ๐ ะจะธััะพะฒะฐะฝะธะต

### ะะพะฝัะธะณััะฐัะธั ะฟะพ ัะผะพะปัะฐะฝะธั

- **ะะปะณะพัะธัะผ:** AES-256-GCM
- **ะะฐะทะผะตั ะบะปััะฐ:** 256 ะฑะธั
- **ะะฐะทะผะตั IV:** 128 ะฑะธั (ัะปััะฐะนะฝัะน ะดะปั ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั)
- **ะะฐะทะผะตั Tag:** 128 ะฑะธั (ะฐััะตะฝัะธัะธะบะฐัะธั)
- **ะะฑะผะตะฝ ะบะปััะฐะผะธ:** RSA-4096 ั OAEP padding

### ะะปะฐะณะธะฝั ัะธััะพะฒะฐะฝะธั

ChatV2 ะธัะฟะพะปัะทัะตั ะผะพะดัะปัะฝัั ะฐััะธัะตะบัััั ะฟะปะฐะณะธะฝะพะฒ ัะธััะพะฒะฐะฝะธั, ะบะพัะพัะฐั ะฟะพะทะฒะพะปัะตั ะปะตะณะบะพ ัะฐััะธัััั ัะธััะตะผั ะฝะพะฒัะผะธ ะฐะปะณะพัะธัะผะฐะผะธ ัะธััะพะฒะฐะฝะธั.

#### ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะฟะปะฐะณะธะฝั

| ะะปะฐะณะธะฝ | ะะปะณะพัะธัะผ | ะะฐะทะฝะฐัะตะฝะธะต | ะกัะฐััั |
|--------|----------|------------|--------|
| **AES-256-GCM** | AES-256-GCM | ะกะธะผะผะตััะธัะฝะพะต ัะธััะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธะน | โ ะะบัะธะฒะตะฝ ะฟะพ ัะผะพะปัะฐะฝะธั |
| **RSA-4096** | RSA/ECB/OAEP | ะะฑะผะตะฝ ะบะปััะฐะผะธ, ัะธััะพะฒะฐั ะฟะพะดะฟะธัั | โ ะะพะดะดะตัะถะธะฒะฐะตััั |

#### ะกะธััะตะผะฐ ะฟะปะฐะณะธะฝะพะฒ (SPI)

ะััะธัะตะบัััะฐ ะฟะปะฐะณะธะฝะพะฒ ะพัะฝะพะฒะฐะฝะฐ ะฝะฐ Java SPI (Service Provider Interface):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  EncryptionPluginManager                     โ
โ                   (ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะปะฐะณะธะฝะฐะผะธ)                     โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โโโ ServiceLoader.load(EncryptionPlugin.class)
               โ
               โผ
        โโโโโโโโโโโโโโโโ
        โ  SPI (JDK)   โ  ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะฐััะถะตะฝะธะต
        โโโโโโโโฌโโโโโโโโ
               โ
       โโโโโโโโโดโโโโโโโโโ
       โ                โ
       โผ                โผ
โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
โ AES Plugin   โ  โ RSA Plugin   โ
โ AES-256-GCM  โ  โ RSA-4096     โ
โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
```

**ะะฐะบ ัะฐะฑะพัะฐะตั SPI:**

1. **ะะฝัะตััะตะนั ะฟะปะฐะณะธะฝะฐ:** `EncryptionPlugin` (ะฒ `chat-encryption-api`)
   - ะะฟัะตะดะตะปัะตั ะบะพะฝััะฐะบั ะดะปั ะฒัะตั ะฟะปะฐะณะธะฝะพะฒ ัะธััะพะฒะฐะฝะธั
   - ะะตัะพะดั: `encrypt()`, `decrypt()`, `generateKey()`, `getName()`

2. **ะะตะณะธัััะฐัะธั ะฟะปะฐะณะธะฝะฐ:** ะคะฐะนะป `META-INF/services/com.chatv2.encryption.api.EncryptionPlugin`
   - ะกะพะดะตัะถะธั ะฟะพะปะฝะพะต ะธะผั ะบะปะฐััะฐ ัะตะฐะปะธะทะฐัะธะธ
   - ะัะธะผะตั ะดะปั AES: `com.chatv2.encryption.aes.AesEncryptionPlugin`

3. **ะะฒัะพะทะฐะณััะทะบะฐ:** `EncryptionPluginManager` ะธัะฟะพะปัะทัะตั `ServiceLoader`
   - ะะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะถะฐะตั ะฒัะต ะฟะปะฐะณะธะฝั ะฟัะธ ัะพะทะดะฐะฝะธะธ
   - ะะพะณะธััะตั: `Loaded encryption plugin: {name} v{version}`

4. **ะัะฑะพั ะฐะบัะธะฒะฝะพะณะพ ะฟะปะฐะณะธะฝะฐ:** ะะตัะฒัะน ะทะฐะณััะถะตะฝะฝัะน ะฟะปะฐะณะธะฝ ััะฐะฝะพะฒะธััั ะฐะบัะธะฒะฝัะผ
   - ะะพะถะฝะพ ะธะทะผะตะฝะธัั ัะตัะตะท `setActivePlugin(name)`
   - ะะพ ัะผะพะปัะฐะฝะธั ะฐะบัะธะฒะตะฝ AES-256-GCM

#### ะะฒัะพะผะฐัะธัะตัะบะฐั ะทะฐะณััะทะบะฐ ะฟะปะฐะณะธะฝะพะฒ

ะะฑะฐ ะฟะปะฐะณะธะฝะฐ ัะธััะพะฒะฐะฝะธั ะทะฐะณััะถะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ััะฐััะต ัะตัะฒะตัะฐ:

```java
// ะ ServerInitializer.java
public EncryptionPluginManager getEncryptionPluginManager() {
    return encryptionPluginManager;  // ะะฒัะพะผะฐัะธัะตัะบะธ ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ
}

// ะ ะปะพะณะฐั ะฟัะธ ััะฐััะต ัะตัะฒะตัะฐ:
// Loaded encryption plugin: AES-256-GCM v1.0.0
// Loaded encryption plugin: RSA-4096 v1.0.0
// Active encryption plugin set to: AES-256-GCM
```

#### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะณะพ ะฟะปะฐะณะธะฝะฐ ัะธััะพะฒะฐะฝะธั

ะงัะพะฑั ะดะพะฑะฐะฒะธัั ะฝะพะฒัะน ะฟะปะฐะณะธะฝ ัะธััะพะฒะฐะฝะธั:

1. **ะกะพะทะดะฐะนัะต ะผะพะดัะปั ะฟะปะฐะณะธะฝะฐ:**

```xml
<!-- pom.xml ะฝะพะฒะพะณะพ ะฟะปะฐะณะธะฝะฐ -->
<project>
    <parent>
        <groupId>com.chatv2</groupId>
        <artifactId>chat-encryption-plugins</artifactId>
        <version>1.0.0</version>
    </parent>
    <artifactId>chat-encryption-custom</artifactId>

    <dependencies>
        <dependency>
            <groupId>com.chatv2</groupId>
            <artifactId>chat-encryption-api</artifactId>
            <version>1.0.0</version>
        </dependency>
    </dependencies>
</project>
```

2. **ะะตะฐะปะธะทัะนัะต ะธะฝัะตััะตะนั EncryptionPlugin:**

```java
package com.chatv2.encryption.custom;

import com.chatv2.encryption.api.EncryptionPlugin;
import com.chatv2.encryption.api.EncryptionAlgorithm;
import com.chatv2.common.crypto.EncryptionResult;
import java.security.Key;
import java.util.concurrent.CompletableFuture;

public class CustomEncryptionPlugin implements EncryptionPlugin {

    @Override
    public String getName() {
        return "CUSTOM-ALGORITHM";
    }

    @Override
    public String getVersion() {
        return "1.0.0";
    }

    @Override
    public EncryptionAlgorithm getAlgorithm() {
        return new EncryptionAlgorithm("CUSTOM-ALGORITHM", "CustomTransformation");
    }

    @Override
    public CompletableFuture<EncryptionResult> encrypt(byte[] plaintext, Key key) {
        // ะะตะฐะปะธะทะฐัะธั ัะธััะพะฒะฐะฝะธั
        return CompletableFuture.completedFuture(/* ... */);
    }

    @Override
    public CompletableFuture<byte[]> decrypt(byte[] ciphertext, byte[] iv, byte[] tag, Key key) {
        // ะะตะฐะปะธะทะฐัะธั ะดะตัะธััะพะฒะฐะฝะธั
        return CompletableFuture.completedFuture(/* ... */);
    }

    @Override
    public CompletableFuture<Key> generateKey() {
        // ะะตะฝะตัะฐัะธั ะบะปััะฐ
        return CompletableFuture.completedFuture(/* ... */);
    }

    @Override
    public boolean isKeyValid(Key key) {
        // ะะฐะปะธะดะฐัะธั ะบะปััะฐ
        return key != null && key.getAlgorithm().equals("CUSTOM");
    }
}
```

3. **ะะฐัะตะณะธัััะธััะนัะต ะฟะปะฐะณะธะฝ ัะตัะตะท SPI:**

ะกะพะทะดะฐะนัะต ัะฐะนะป `src/main/resources/META-INF/services/com.chatv2.encryption.api.EncryptionPlugin`:

```
com.chatv2.encryption.custom.CustomEncryptionPlugin
```

4. **ะะพะฑะฐะฒััะต ะทะฐะฒะธัะธะผะพััั ะฒ pom.xml ัะตัะฒะตัะฐ/ะบะปะธะตะฝัะฐ:**

```xml
<dependency>
    <groupId>com.chatv2</groupId>
    <artifactId>chat-encryption-custom</artifactId>
    <version>1.0.0</version>
</dependency>
```

5. **ะะตัะตัะพะฑะตัะธัะต ะฟัะพะตะบั:**

```bash
mvn clean install
```

ะะปะฐะณะธะฝ ะฑัะดะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะถะตะฝ ะฟัะธ ัะปะตะดัััะตะผ ะทะฐะฟััะบะต ัะตัะฒะตัะฐ.

### ะัะพัะตัั ะพะฑะผะตะฝะฐ ะบะปััะฐะผะธ

1. ะะปะธะตะฝั ะฟะพะดะบะปััะฐะตััั ะบ ัะตัะฒะตัั
2. ะกะตัะฒะตั ะพัะฟัะฐะฒะปัะตั RSA ะฟัะฑะปะธัะฝัะน ะบะปัั (4096 ะฑะธั)
3. ะะปะธะตะฝั ะณะตะฝะตัะธััะตั AES-256 ัะตััะธะพะฝะฝัะน ะบะปัั
4. ะะปะธะตะฝั ัะธัััะตั ัะตััะธะพะฝะฝัะน ะบะปัั RSA ะฟัะฑะปะธัะฝัะผ ะบะปััะพะผ
5. ะกะตัะฒะตั ัะฐััะธััะพะฒัะฒะฐะตั ัะตััะธะพะฝะฝัะน ะบะปัั RSA ะฟัะธะฒะฐัะฝัะผ ะบะปััะพะผ
6. ะัะต ะฟะพัะปะตะดัััะธะต ัะพะพะฑัะตะฝะธั ัะธััััััั AES-256

## ๐ป ะะฐะทัะฐะฑะพัะบะฐ

### ะะฐัััะพะนะบะฐ IDE

#### IntelliJ IDEA

1. ะัะบัะพะนัะต ะฟัะพะตะบั ะบะฐะบ Maven-ะฟัะพะตะบั
2. ะฃะฑะตะดะธัะตัั, ััะพ ะฒัะฑัะฐะฝ JDK 21
3. ะะบะปััะธัะต ะพะฑัะฐะฑะพัะบั ะฐะฝะฝะพัะฐัะธะน ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ
4. ะะฐะฟััะบ ัะตััะพะฒ: ะะะ ะฝะฐ ะฟัะพะตะบั -> Run Tests

#### Eclipse

1. ะะผะฟะพััะธััะนัะต ะบะฐะบ Maven-ะฟัะพะตะบั
2. ะะฐัััะพะนัะต JRE Java 21
3. ะะฑะฝะพะฒะธัะต Maven-ะฟัะพะตะบั
4. ะะฐะฟััะบ ะบะฐะบ JUnit ัะตัั

### ะะฐะฟััะบ ัะตััะพะฒ

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตััะพะฒ
mvn test

# ะะฐะฟััะบ ัะตััะพะฒ ะบะพะฝะบัะตัะฝะพะณะพ ะผะพะดัะปั
mvn test -pl chat-server

# ะะฐะฟััะบ ะบะพะฝะบัะตัะฝะพะณะพ ัะตััะพะฒะพะณะพ ะบะปะฐััะฐ
mvn test -Dtest=UserManagerTest

# ะะตะฝะตัะฐัะธั ะพััััะฐ ะพ ะฟะพะบัััะธะธ
mvn test jacoco:report
```

### ะะฐัะตััะฒะพ ะบะพะดะฐ

```bash
# ะัะพะฒะตัะบะฐ ััะธะปั ะบะพะดะฐ
mvn checkstyle:check

# ะะพะธัะบ ะฑะฐะณะพะฒ
mvn spotbugs:check

# ะะฝะฐะปะธะท PMD
mvn pmd:check

# ะะพะปะฝะฐั ะฟัะพะฒะตัะบะฐ ะบะฐัะตััะฒะฐ
mvn verify
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะกัะฐััั ัะตััะพะฒ

| ะะพะดัะปั | ะขะตััั | ะกัะฐััั |
|--------|-------|--------|
| chat-common | 202 | โ PASS |
| chat-encryption-api | 14 | โ PASS |
| chat-encryption-aes | 17 | โ PASS |
| chat-encryption-rsa | 16 | โ PASS |
| chat-server | 95 | โ PASS |
| chat-client | - | โ๏ธ ะัะถะฝั ะธัะฟัะฐะฒะปะตะฝะธั |
| **ะะขะะะ** | **344** | **โ PASS** |

 ### ะะตะดะฐะฒะฝะธะต ะธัะฟัะฐะฒะปะตะฝะธั (ะคะตะฒัะฐะปั 2026)

#### GUI ะธ FXML
- โ ะัะฟัะฐะฒะปะตะฝั ะฒัะทะพะฒั getter-ะผะตัะพะดะพะฒ ะฒ ServerLauncher.java
- โ ะะพะฑะฐะฒะปะตะฝ ะพััััััะฒัััะธะน ะธะผะฟะพัั javafx.application.Application
- โ ะัะฟัะฐะฒะปะตะฝะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัััะฐัะตะฒัะตะณะพ API ะฒ ClientLauncher.java
- โ ะัะฟัะฐะฒะปะตะฝั ะพัะธะฑะบะธ ะทะฐะณััะทะบะธ FXML-ัะฐะนะปะพะฒ
- โ ะัะฟัะฐะฒะปะตะฝั ะพัะธะฑะบะธ ะทะฐะณััะทะบะธ ะธะบะพะฝะพะบ ะฒ ะธะฝัะตััะตะนัะต

#### ะขะตััะธัะพะฒะฐะฝะธะต
- โ ะัะฟัะฐะฒะปะตะฝ ะดัะฑะปะธััััะธะนัั ะบะพะด ะฒ ChatManagerTest.java
- โ ะัะฟัะฐะฒะปะตะฝั ัะฑะพะธ ัะตััะพะฒ RSA ัะธััะพะฒะฐะฝะธั (16/16 PASS)
- โ ะัะฟัะฐะฒะปะตะฝั ะฒัะต ัะฑะพะธ ัะตััะพะฒ ัะตัะฒะตัะฝะพะณะพ ะผะพะดัะปั (95/95 PASS)
- โ ะะพะฑะฐะฒะปะตะฝ ะธะผะฟะพัั CountDownLatch ะฒ ะฑะฐะทั ัะตััะพะฒ JavaFX
- โ ะัะฟัะฐะฒะปะตะฝั ะผะพะดะธัะธะบะฐัะพัั ะดะพัััะฟะฐ setUp/tearDown ะฒ GUI ัะตััะฐั

#### ะะธะฝะฐัะฝัะน ะฟัะพัะพะบะพะป
- โ ะะตะฐะปะธะทะพะฒะฐะฝ 28-ะฑะฐะนัะฝัะน ะทะฐะณะพะปะพะฒะพะบ PacketHeader
- โ ะะฝัะตะณัะธัะพะฒะฐะฝ BinaryMessageCodec ะฒ ัะตัะฒะตั ะธ ะบะปะธะตะฝั
- โ ะะพะฑะฐะฒะปะตะฝะฐ ะฟะพะดะดะตัะถะบะฐ CRC32 ะบะพะฝััะพะปัะฝะพะน ััะผะผั
- โ ะะพะฑะฐะฒะปะตะฝะฐ ะฟะพะดะดะตัะถะบะฐ ัะปะฐะณะพะฒ ัะธััะพะฒะฐะฝะธั ะธ ัะถะฐัะธั

#### ะะฐะทะฐ ะดะฐะฝะฝัั
- โ ะัะฟัะฐะฒะปะตะฝะฐ ะพัะธะฑะบะฐ H2 ะฑะฐะทั ะดะฐะฝะฝัั (ะฟััะธ ะบ ะะ)
- โ ะะพัะผะฐะปะธะทะพะฒะฐะฝั ะฟััะธ ะดะปั AUTO_SERVER=TRUE
- โ ะัะฟัะฐะฒะปะตะฝั ะฟัะพะฑะปะตะผั ั ะฟัััะผะธ ะฝะฐ Windows

#### ะะฝััะฐััััะบัััะฐ
- โ ะกะพะทะดะฐะฝ build_and_run.bat ะดะปั ะฟะพะปะฝะพะน ัะฑะพัะบะธ ะธ ะทะฐะฟััะบะฐ
- โ ะกะพะทะดะฐะฝ run_server.bat ะดะปั ะทะฐะฟััะบะฐ ัะตัะฒะตัะฐ ั UTF-8
- โ ะะฑะฝะพะฒะปะตะฝะฐ ะบะพะฝัะธะณััะฐัะธั logback.xml ั ัะฐะทะดะตะปะตะฝะธะตะผ ะฟะพ ะผะพะดัะปัะผ
- โ ะัะต bat-ัะบัะธะฟัั ะฟะพะดะดะตัะถะธะฒะฐัั UTF-8 ะบะพะดะธัะพะฒะบั

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะัััะธะต ะฟัะฐะบัะธะบะธ ะฑะตะทะพะฟะฐัะฝะพััะธ

1. **ะะฐัะพะปะธ**: ะฅัะฐะฝัััั ะบะฐะบ ัะตัะธ Argon2id ั ัะฝะธะบะฐะปัะฝะพะน ัะพะปัั ะดะปั ะบะฐะถะดะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
2. **ะขะพะบะตะฝั ัะตััะธะธ**: JWT ั 256-ะฑะธัะฝัะผ ัะตะบัะตัะพะผ, ััะพะบ ะดะตะนััะฒะธั 1 ัะฐั
3. **ะจะธััะพะฒะฐะฝะธะต**: AES-256-GCM ั ะฐััะตะฝัะธัะธัะธัะพะฒะฐะฝะฝัะผ ัะธััะพะฒะฐะฝะธะตะผ
4. **ะฃะฟัะฐะฒะปะตะฝะธะต ะบะปััะฐะผะธ**: RSA ะบะปััะธ ััะฐะฝัััั ะฒ Java KeyStore
5. **ะะฐะปะธะดะฐัะธั ะฒะฒะพะดะฐ**: ะัะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะต ะดะฐะฝะฝัะต ะพัะธัะฐัััั ะธ ะฟัะพะฒะตัััััั
6. **ะะณัะฐะฝะธัะตะฝะธะต ัะบะพัะพััะธ**: ะะฐัะธัะฐ ะพั ะฑััััะพััะฐ ะฟัะธ ะฐััะตะฝัะธัะธะบะฐัะธะธ
7. **ะะพะดัะปัะฝะฐั ะบัะธะฟัะพะณัะฐัะธั**: ะะฐััะธััะตะผะฐั ะฐััะธัะตะบัััะฐ ัะตัะตะท SPI ะฟะปะฐะณะธะฝั ัะธััะพะฒะฐะฝะธั

### ะััะธัะตะบัััะฐ ัะธััะพะฒะฐะฝะธั

ะกะธััะตะผะฐ ัะธััะพะฒะฐะฝะธั ChatV2 ะฟะพัััะพะตะฝะฐ ะฝะฐ ะผะพะดัะปัะฝะพะน ะฐััะธัะตะบัััะต ั ะฟะพะดะดะตัะถะบะพะน ะฟะปะฐะณะธะฝะพะฒ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะะตะทะพะฟะฐัะฝะพััั ัะพะพะฑัะตะฝะธะน                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโ      RSA-4096       โโโโโโโโโโโโโโโโโโโ โ
โ  โ   ะะฑะผะตะฝ ะบะปััะฐะผะธ โ โโโโโโโโโโโโโโโโโโโโบ โ  ะกะตัะฒะตั         โ โ
โ  โ   (ะบะปะธะตะฝั)      โ   OAEP Padding      โ  (Key Store)    โ โ
โ  โโโโโโโโโโฌโโโโโโโโโ                     โโโโโโโโโโโโโโโโโโโ โ
โ           โ                                                    โ
โ           โ AES-256 ัะตััะธะพะฝะฝัะน ะบะปัั                            โ
โ           โผ                                                    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ         AES-256-GCM (ะฐะบัะธะฒะฝัะน ะฟะปะฐะณะธะฝ)                    โ โ
โ  โ  โข IV 128 ะฑะธั (ัะฝะธะบะฐะปัะฝัะน ะดะปั ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั)         โ โ
โ  โ  โข Tag 128 ะฑะธั (ะฐััะตะฝัะธัะธะบะฐัะธั)                          โ โ
โ  โ  โข ะะฐัะธัะฐ ะพั replay-ะฐัะฐะบ                                โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะกะปะพะธ ะทะฐัะธัั:**

1. **ะขัะฐะฝัะฟะพััะฝัะน ััะพะฒะตะฝั:** ะะฐัะธัะฐ ัะตัะตะท TLS (ะพะฟัะธะพะฝะฐะปัะฝะพ)
2. **ะัะพัะพะบะพะป ัะธััะพะฒะฐะฝะธั:** AES-256-GCM ะดะปั ะฒัะตั ัะพะพะฑัะตะฝะธะน ะฟะพัะปะต ะฐััะตะฝัะธัะธะบะฐัะธะธ
3. **ะะฑะผะตะฝ ะบะปััะฐะผะธ:** RSA-4096 ั OAEP padding ะดะปั ะฑะตะทะพะฟะฐัะฝะพะน ะฟะตัะตะดะฐัะธ ัะตััะธะพะฝะฝัั ะบะปััะตะน
4. **ะััะตะฝัะธัะธะบะฐัะธั:** JWT ัะพะบะตะฝั ั ะบะพัะพัะบะธะผ ััะพะบะพะผ ะดะตะนััะฒะธั
5. **ะะฝัะตะณัะฐัะธั ั ะฟะปะฐะณะธะฝะฐะผะธ:** SPI ะฟะพะทะฒะพะปัะตั ะปะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต ะฐะปะณะพัะธัะผั ัะธััะพะฒะฐะฝะธั

### ะัะดะธัั ะฑะตะทะพะฟะฐัะฝะพััะธ

- ะัะตะดะพัะฒัะฐัะตะฝะธะต SQL-ะธะฝัะตะบัะธะน
- ะะฐัะธัะฐ ะพั XSS (ะตัะปะธ ะดะพะฑะฐะฒะปะตะฝั ะฒะตะฑ-ััะฝะบัะธะธ)
- ะะฐัะธัะฐ ะพั CSRF
- ะกะผัะณัะตะฝะธะต timing attacks
- ะะตะทะพะฟะฐัะฝะฐั ะณะตะฝะตัะฐัะธั ัะปััะฐะนะฝัั ัะธัะตะป

## ๐ฏ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะตะฝัะผะฐัะบะธ

| ะะตััะธะบะฐ | ะฆะตะปั | ะขะตะบััะตะต |
|---------|------|---------|
| ะะฐัะฐะปะปะตะปัะฝัะต ัะพะตะดะธะฝะตะฝะธั | 10,000+ | TBD |
| ะัะพะฟััะบะฝะฐั ัะฟะพัะพะฑะฝะพััั | 100,000 msg/s | TBD |
| ะะฐะผััั ะฝะฐ ัะพะตะดะธะฝะตะฝะธะต | < 10KB | TBD |
| ะัะตะผั ะทะฐะฟััะบะฐ (ัะตัะฒะตั) | < 5 ัะตะบ | TBD |
| ะะฐะดะตัะถะบะฐ (ััะตะดะฝัั) | < 50ms | TBD |

### ะะฟัะธะผะธะทะฐัะธั

- ะะธัััะฐะปัะฝัะต ะฟะพัะพะบะธ ะดะปั ะผะฐััะพะฒะพะณะพ ะฟะฐัะฐะปะปะตะปะธะทะผะฐ
- ะัะป ัะพะตะดะธะฝะตะฝะธะน ะดะปั ะฑะฐะทั ะดะฐะฝะฝัั
- ะัะธะฝััะพะฝะฝัะน I/O ั Netty
- ะกะถะฐัะธะต ัะพะพะฑัะตะฝะธะน ะดะปั ะฑะพะปััะธั ะฟะพะปะตะทะฝัั ะฝะฐะณััะทะพะบ
- ะญััะตะบัะธะฒะฝัะน ะฑะธะฝะฐัะฝัะน ะฟัะพัะพะบะพะป

## ๐ง ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะกะตัะฒะตั ะฝะต ะทะฐะฟััะบะฐะตััั

- ะัะพะฒะตัััะต, ะดะพัััะฟะตะฝ ะปะธ ะฟะพัั 8080
- ะฃะฑะตะดะธัะตัั, ััะพ ัััะฐะฝะพะฒะปะตะฝ Java 21: `java -version`
- ะัะพะฒะตัััะต ะฝะฐัััะพะนะบะธ ัะฐะตัะฒะพะปะฐ ะดะปั UDP/TCP ะฟะพััะพะฒ
- ะัะพะฒะตัััะต ะปะพะณะธ ะฒ `logs/server.log`

### ะะปะธะตะฝั ะฝะต ะฝะฐัะพะดะธั ัะตัะฒะตั

- ะฃะฑะตะดะธัะตัั, ััะพ UDP broadcast ะฒะบะปัััะฝ ะฒ ะบะพะฝัะธะณััะฐัะธะธ ัะตัะฒะตัะฐ
- ะัะพะฒะตัััะต, ัะฐะทัะตัะฐะตั ะปะธ ัะฐะตัะฒะพะป UDP ะฝะฐ ะฟะพััั 9999
- ะฃะฑะตะดะธัะตัั, ััะพ ะบะปะธะตะฝั ะธ ัะตัะฒะตั ะฒ ะพะดะฝะพะน ัะตัะธ
- ะะพะฟัะพะฑัะนัะต ะฒะฒะตััะธ ะฐะดัะตั ัะตัะฒะตัะฐ ะฒัััะฝัั

### ะัะพะฑะปะตะผั ั ัะพะตะดะธะฝะตะฝะธะตะผ

- ะฃะฑะตะดะธัะตัั, ััะพ ะฝะฐัััะพะนะบะธ ัะธััะพะฒะฐะฝะธั ัะพะฒะฟะฐะดะฐัั
- ะัะพะฒะตัััะต ัะตัะตะฒะพะต ะฟะพะดะบะปััะตะฝะธะต
- ะัะพะฒะตัััะต ะปะพะณะธ ัะตัะฒะตัะฐ ะฝะฐ ะฝะฐะปะธัะธะต ะพัะธะฑะพะบ
- ะฃะฑะตะดะธัะตัั, ััะพ ัะตัะฒะตั ะฝะต ะดะพััะธะณ ะปะธะผะธัะฐ ะฟะพะดะบะปััะตะฝะธะน

## ๐บ ะะพัะพะถะฝะฐั ะบะฐััะฐ

- [x] ะัะฝะพะฒะฝะฐั ะฐััะธัะตะบัััะฐ
- [x] ะะธะฝะฐัะฝัะน ะฟัะพัะพะบะพะป
- [x] ะะปะฐะณะธะฝั ัะธััะพะฒะฐะฝะธั
- [x] ะกะตัะฒะตัะฝัะน ะผะพะดัะปั
- [x] ะขะตััั ัะตัะฒะตัะฐ (95/95)
- [x] ะขะตััั ัะธััะพะฒะฐะฝะธั (48/48)
- [x] ะขะตััั ะพะฑัะตะณะพ ะผะพะดัะปั (202/202)
- [โ๏ธ] ะะปะธะตะฝััะบะธะน ะผะพะดัะปั (GUI/ัะตัั)
- [ ] ะะพะปะฝะฐั ัะตะฐะปะธะทะฐัะธั GUI
- [ ] ะะตัะตะดะฐัะฐ ัะฐะนะปะพะฒ
- [ ] ะะพะปะพัะพะฒัะต ัะพะพะฑัะตะฝะธั
- [ ] ะะธะดะตะพะทะฒะพะฝะบะธ
- [ ] ะะพะฑะธะปัะฝัะน ะบะปะธะตะฝั (Android/iOS)
- [ ] ะะตะฑ-ะบะปะธะตะฝั (WebSocket)
- [ ] ะัะปััะธัะทััะฝะพััั
- [ ] ะะฐัะบะตัะฟะปะตะนั ะฟะปะฐะณะธะฝะพะฒ

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- [ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต](TECHNICAL_SPEC.md) - ะะพะปะฝะพะต ัะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต
- [ะกะฟะตัะธัะธะบะฐัะธั ะฟัะพัะพะบะพะปะฐ](PROTOCOL_SPEC.md) - ะะตัะฐะปะธ ะฑะธะฝะฐัะฝะพะณะพ ะฟัะพัะพะบะพะปะฐ
- [ะะปะฐะฝ ัะฐะทัะฐะฑะพัะบะธ](DEVELOPMENT_PLAN.md) - ะะปะฐะฝ ะฟะพััะฐะฟะฝะพะน ัะตะฐะปะธะทะฐัะธะธ

## ๐ค ะฃัะฐััะธะต ะฒ ัะฐะทัะฐะฑะพัะบะต

ะะบะปะฐะดั ะฟัะธะฒะตัััะฒััััั! ะะพะถะฐะปัะนััะฐ, ัะปะตะดัะนัะต ััะธะผ ัะตะบะพะผะตะฝะดะฐัะธัะผ:

1. ะคะพัะบะฝะธัะต ัะตะฟะพะทะธัะพัะธะน
2. ะกะพะทะดะฐะนัะต ะฒะตัะบั ะดะปั ััะฝะบัะธะธ (`git checkout -b feature/amazing-feature`)
3. ะะฐัะธะบัะธััะนัะต ะธะทะผะตะฝะตะฝะธั (`git commit -m 'Add amazing feature'`)
4. ะัะฟัะฐะฒััะต ะฒ ะฒะตัะบั (`git push origin feature/amazing-feature`)
5. ะัะบัะพะนัะต Pull Request

### ะกัะธะปั ะบะพะดะฐ

- ะกะปะตะดัะนัะต ัะพะณะปะฐัะตะฝะธัะผ Java Code Conventions
- ะัะฟะพะปัะทัะนัะต 4-ะฟัะพะฑะตะปัะฝัะน ะพััััะฟ
- ะะพะฑะฐะฒะปัะนัะต JavaDoc ะดะปั ะฒัะตั ะฟัะฑะปะธัะฝัั API
- ะะธัะธัะต unit ัะตััั ะดะปั ะฝะพะฒัั ััะฝะบัะธะน
- ะฃะฑะตะดะธัะตัั, ััะพ ะฒัะต ัะตััั ะฟัะพัะพะดัั ะฟะตัะตะด PR

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ะปะธัะตะฝะทะธัะพะฒะฐะฝ ะฟะพะด MIT License - ัะผ. ัะฐะนะป [LICENSE](LICENSE) ะดะปั ะดะตัะฐะปะตะน.

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

- ะะพะผะฐะฝะดะต Netty ะทะฐ ะพัะปะธัะฝัะน ัะตัะตะฒะพะน ััะตะนะผะฒะพัะบ
- ะกะพะพะฑัะตััะฒั JavaFX ะทะฐ ัะพะฒัะตะผะตะฝะฝัะน toolkit
- Bouncy Castle ะทะฐ ะฑะธะฑะปะธะพัะตะบั ะบัะธะฟัะพะณัะฐัะธะธ
- ะัะตะผ ััะฐััะฝะธะบะฐะผ ััะพะณะพ ะฟัะพะตะบัะฐ

## ๐ ะะพะฝัะฐะบั

- ะัะบะพะฒะพะดะธัะตะปั ะฟัะพะตะบัะฐ: [ะะฐัะต ะะผั]
- Email: your.email@example.com
- Issues: [GitHub Issues](https://github.com/yourusername/chatv2/issues)

---

**ะะตััะธั:** 1.0.0
**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต:** 7 ะคะตะฒัะฐะปั 2026
**ะกัะฐััั:** ะ ัะฐะทัะฐะฑะพัะบะต

---

*ChatV2 - ะะตะทะพะฟะฐัะฝะพะต ะพะฑัะตะฝะธะต, ัะพะฒัะตะผะตะฝะฝะฐั ะฐััะธัะตะบัััะฐ, ะพัะบััััะน ะบะพะด* ๐ฌ๐
