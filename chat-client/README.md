# ChatV2 Client

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞ —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –Ω–∞ JavaFX.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 21 –∏–ª–∏ –≤—ã—à–µ
- Maven 3.6+

## –°–±–æ—Ä–∫–∞

```bash
cd chat-client
mvn clean install
```

## –ó–∞–ø—É—Å–∫

```bash
cd chat-apps/chat-client-launcher/target
java -jar chat-client-launcher-1.0.0-jar-with-dependencies.jar
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|
| üîç **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤** | UDP multicast –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ —Å–µ—Ç–∏ |
| üîó **–†—É—á–Ω–æ–π –≤–≤–æ–¥ —Ö–æ—Å—Ç–∞ –∏ –ø–æ—Ä—Ç–∞** | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É |
| üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É |
| üë§ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –∞–≤–∞—Ç–∞—Ä–æ–º** | –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∞–≤–∞—Ç–∞—Ä–∞ |
| üí¨ **–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** | –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –º–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| ‚öôÔ∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º** | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∞–≤–∞—Ç–∞—Ä–∞ |
| üåô **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞** | –ü—Ä–∏—è—Ç–Ω—ã–π —Ç–µ–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≥–ª–∞–∑ |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------------|----------|
| **GUI** | JavaFX —Å FXML | –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ |
| **–°–µ—Ç—å** | Netty —Å TCP/IP | –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–µ—Ç–µ–≤–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è |
| **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** | AES-256-GCM | –ó–∞—â–∏—Ç–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | SLF4J + Log4j2 | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–µ–¥–µ–Ω–∏–µ –ª–æ–≥–æ–≤ |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
chat-client/
‚îú‚îÄ‚îÄ src/main/java/com/chatv2/client/
‚îÇ   ‚îú‚îÄ‚îÄ gui/               # JavaFX –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/    # FXML –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ component/     # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ network/           # –°–µ—Ç–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å (Netty)
‚îÇ   ‚îú‚îÄ‚îÄ discovery/         # –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ (UDP)
‚îÇ   ‚îú‚îÄ‚îÄ core/              # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ src/main/resources/
    ‚îú‚îÄ‚îÄ fxml/              # FXML —Ñ–∞–π–ª—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    ‚îú‚îÄ‚îÄ css/               # –°—Ç–∏–ª–∏
    ‚îú‚îÄ‚îÄ images/            # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∏–∫–æ–Ω–∫–∏
    ‚îú‚îÄ‚îÄ client.properties  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ log4j2.xml         # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- **AES-GCM** —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –¥–ª–∏–Ω–æ–π –∫–ª—é—á–∞ 256 –±–∏—Ç
- **PBKDF2** —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∏—Ç–µ—Ä–∞—Ü–∏–π
- **RSA** –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ payload –¥–æ 10MB –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DoS-–∞—Ç–∞–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **Java** | 21 | Records, Pattern Matching, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å |
| **JavaFX** | 21.0.1 | –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| **Netty** | 4.1.109 | –°–µ—Ç–µ–≤–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **Log4j2** | 2.23.1 | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **Bouncy Castle** | 1.77 | –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã |
| **SnakeYAML** | - | –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ |

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–ª–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ —Ñ–∞–π–ª–∞ `client.properties`:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------------------|----------|
| **UDP multicast** | 239.255.255.250:9999 | –ê–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ |
| **–¢–∞–π–º–∞—É—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è** | 30 —Å–µ–∫—É–Ω–¥ | –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤ |
| **–ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** | 10 —Å–µ–∫—É–Ω–¥ | –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ |

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª–µ `src/main/resources/client.properties`:

```properties
# Discovery settings
discovery.multicast.address=239.255.255.250
discovery.multicast.port=9999
discovery.timeout.seconds=30
discovery.refresh.interval.seconds=10

# Connection settings
connection.timeout.seconds=30
connection.reconnect.attempts=3
connection.reconnect.delay.seconds=5

# UI settings
ui.theme=dark
ui.avatar.max.size.kb=512
```

## –ü—Ä–æ—Ç–æ–∫–æ–ª

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º:

### –§–æ—Ä–º–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞

```
+--------+--------+--------+--------+
| Magic Number (4 –±–∞–π—Ç–∞)          |
+--------+--------+--------+--------+
| Version (1 –±–∞–π—Ç) | Type (1 –±–∞–π—Ç)  |
+--------+--------+--------+--------+
| Payload Length (4 –±–∞–π—Ç–∞, BE)     |
+--------+--------+--------+--------+
| Encryption Flags (1 –±–∞–π—Ç)        |
+--------+--------+--------+--------+
| Reserved (3 –±–∞–π—Ç–∞)               |
+--------+--------+--------+--------+
| Timestamp (8 –±–∞–π—Ç, BE)           |
+--------+--------+--------+--------+
| Checksum (4 –±–∞–π—Ç–∞, CRC32)        |
+--------+--------+--------+--------+
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| **Magic Number** | 0x43484154 ("CHAT") | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ |
| **–†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞** | 40 –±–∞–π—Ç | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä |
| **–í–µ—Ä—Å–∏—è** | 1 | –í–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ |
| **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** | AES-GCM | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞** | CRC32 | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö |

## API

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

#### ChatClient
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–ª–∏–µ–Ω—Ç–∞, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–∏–π –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

```java
ChatClient client = new ChatClient(config);
client.connect(host, port);
client.login(username, password);
client.sendMessage(message);
```

#### ServerDiscovery
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ —Å–µ—Ç–∏.

```java
ServerDiscovery discovery = new ServerDiscovery();
discovery.startDiscovery();
List<ServerInfo> servers = discovery.getDiscoveredServers();
discovery.stopDiscovery();
```

#### NetworkClient
–°–µ—Ç–µ–≤–æ–π –∫–ª–∏–µ–Ω—Ç –Ω–∞ –±–∞–∑–µ Netty.

```java
NetworkClient networkClient = new NetworkClient(host, port);
networkClient.connect();
networkClient.sendPacket(packet);
networkClient.disconnect();
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
cd chat-client
mvn test
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```bash
mvn verify -DskipITs=false
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–ª–∏–µ–Ω—Ç –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ multicast —Ä–∞–∑—Ä–µ—à–µ–Ω –≤ –≤–∞—à–µ–π —Å–µ—Ç–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞

### –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞ –∏ –ø–æ—Ä—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `telnet`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Ñ–∞–π–ª–µ `logs/client.log`

### –ü—Ä–æ–±–ª–µ–º—ã —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –≤–µ—Ä—Å–∏–∏ Bouncy Castle
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –≤ `client.properties`

## –õ–∏—Ü–µ–Ω–∑–∏—è

Copyright ¬© 2026 ChatV2. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
